{"ast":null,"code":"import _objectSpread from\"C:/Users/ambre/Desktop/INSA/5A/MATEO/PPIA/ppia/Front_React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{React,useState,useRef,useEffect}from\"react\";import TextField from\"@mui/material/TextField\";import authConf from\"./authConf.json\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[studentNumber,setStudentNumber]=useState('');const[password,setPassword]=useState('');const[connected,setConnected]=useState(false);const[query,setQuery]=useState([]);const[chatHistory,setChatHistory]=useState([[]]);const[currentChatHistory,setCurrentChatHistory]=useState({conversation:[],conversationIndex:-1});const chatHistoryRef=useRef(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleError=errorMessage=>{setError(errorMessage);};const handleClose=()=>{setError(null);};function ErrorModal(_ref){let{error,onClose}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});}const handleLogin=e=>{e.preventDefault();if(studentNumber==authConf.studentNumber&&password==authConf.password){setConnected(true);}else{console.log(\"Nombre de usuario o contraseña incorrectos, por favor inténtalo de nuevo.\");}};const inputHandler=e=>{const userInput=e.target.value;setQuery(userInput);};// Enter key press launch a call to the API\nconst handleKeyDown=e=>{if(e.key===\"Enter\"){handleSubmit();}};// Submission of the query to the back API\nconst handleSubmit=()=>{setLoading(true);const jsonData={query:query,history:currentChatHistory.conversation};fetch('api/query',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(jsonData)}).then(response=>response.json()).then(data=>{setLoading(false);if(data.message.answer_es===\"Ha alcanzado el límite máximo de una conversación: por favor elimine mensajes anteriores o inicie una nueva conversación.\"){handleError(\"Ha ocurrido un error: \"+data.message.answer_es);}else{setCurrentChatHistory(prevHistory=>({conversation:[...(prevHistory.conversation||[]),{id:data.message.id,query_es:query,answer_es:data.message.answer_es}],conversationIndex:prevHistory.conversationIndex}));// Update  the global chat history to avoid incoherences\nif(currentChatHistory.conversation===undefined||currentChatHistory.conversation.length===0){setChatHistory([...chatHistory,[{id:data.message.id,query_es:query,answer_es:data.message.answer_es}]]);}else{const updatedHistory=chatHistory.map((conversation,index)=>{if(index===currentChatHistory.conversationIndex){return[...currentChatHistory.conversation,{id:data.message.id,query_es:query,answer_es:data.message.answer_es}];}return conversation;});setChatHistory(updatedHistory);}}}).catch(error=>{console.error('Error while sending the request to the backend: ',error);handleError(\"Ha ocurrido un error: por favor verifica que su pregunta no esté vacía.\");setLoading(false);});};const handleChangeHistory=(index,item)=>{setCurrentChatHistory({conversationIndex:index,conversation:item});};const handleNewChat=()=>{const index=chatHistory.length;setCurrentChatHistory({conversationIndex:index,conversation:[]});};const handleDeleteMessage=messageIndex=>{setChatHistory(prevChatHistory=>{const updatedChatHistory=prevChatHistory.map((conversation,index)=>{if(index===currentChatHistory.conversationIndex){const updatedConversation=conversation.filter((_,index)=>index!==messageIndex);const updatedConversationWithNewIDs=updatedConversation.map((message,index)=>_objectSpread(_objectSpread({},message),{},{id:index// Assign new ID based on index\n}));if(updatedConversationWithNewIDs.length===0){return null;// Filter out the empty conversation\n}return updatedConversationWithNewIDs;}return conversation;}).filter(conversation=>conversation!==null);return updatedChatHistory;});setCurrentChatHistory(prevHistory=>{const updatedConversation=prevHistory.conversation.filter(message=>{return message.id!==messageIndex;});// Assign new ID based on index for the updated messages\nconst updatedConversationWithNewIDs=updatedConversation.map((message,index)=>_objectSpread(_objectSpread({},message),{},{id:index}));// Return the updated conversation and preserve the conversation index\nreturn{conversation:updatedConversationWithNewIDs,conversationIndex:prevHistory.conversationIndex};});};useEffect(()=>{if(chatHistoryRef.current){chatHistoryRef.current.scrollTop=chatHistoryRef.current.scrollHeight;}},[chatHistory]);useEffect(()=>{const fetchChatHistory=async()=>{try{const response=await fetch('History.json');const data=await response.json();if(data[0].length===0){setChatHistory([]);setCurrentChatHistory({conversationIndex:0,conversation:[]});}else{setChatHistory(data);setCurrentChatHistory({conversationIndex:data.length-1,conversation:data[data.length-1]});}}catch(error){console.error('Error fetching chat history:',error);}};fetchChatHistory();},[]);if(!connected){return/*#__PURE__*/_jsxs(\"div\",{className:\"container-form\",children:[\" \",/*#__PURE__*/_jsx(\"form\",{id:\"msform\",children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Por favor, autent\\xEDquese \"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:studentNumber,onChange:e=>setStudentNumber(e.target.value),placeholder:\"N\\xFAmero estudiante\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Contrase\\xF1a\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"saveHistory-button\",onClick:handleLogin,children:\"Entrar\"})]})})]});}// Front\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Quiz de Matematicas\"}),/*#__PURE__*/_jsx(\"div\",{class:\"border d-table w-100\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-panel left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-scroll\",ref:chatHistoryRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Quizes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"newChat-button\",onClick:handleNewChat,children:\"Nuevo Quiz\"})]}),chatHistory.length>0&&chatHistory.map((item,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"history-button \".concat(index===currentChatHistory.conversationIndex?'selected-history-button':''),onClick:()=>handleChangeHistory(index,item),children:item&&item[0]&&item[0].query_es},index))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"history-panel right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"history-scroll\",ref:chatHistoryRef,children:/*#__PURE__*/_jsx(\"ul\",{children:currentChatHistory&&currentChatHistory.conversation.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"messages\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"whatsapp-bubble\",children:[\" \",item.query_es]}),/*#__PURE__*/_jsx(\"p\",{className:\"whatsapp-bubble received\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.answer_es]})}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>{handleDeleteMessage(index);},children:\"Suprimir\"})]},index))})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",onChange:inputHandler,onKeyPress:handleKeyDown,variant:\"outlined\",fullWidth:true,label:\"Respuesta\"}),/*#__PURE__*/_jsx(\"button\",{className:\"search-button\",onClick:handleSubmit,disabled:loading,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}):'Enviar'}),error&&/*#__PURE__*/_jsx(ErrorModal,{error:error,onClose:handleClose})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","TextField","authConf","jsx","_jsx","jsxs","_jsxs","App","studentNumber","setStudentNumber","password","setPassword","connected","setConnected","query","setQuery","chatHistory","setChatHistory","currentChatHistory","setCurrentChatHistory","conversation","conversationIndex","chatHistoryRef","loading","setLoading","error","setError","handleError","errorMessage","handleClose","ErrorModal","_ref","onClose","className","children","onClick","handleLogin","e","preventDefault","console","log","inputHandler","userInput","target","value","handleKeyDown","key","handleSubmit","jsonData","history","fetch","method","headers","body","JSON","stringify","then","response","json","data","message","answer_es","prevHistory","id","query_es","undefined","length","updatedHistory","map","index","catch","handleChangeHistory","item","handleNewChat","handleDeleteMessage","messageIndex","prevChatHistory","updatedChatHistory","updatedConversation","filter","_","updatedConversationWithNewIDs","_objectSpread","current","scrollTop","scrollHeight","fetchChatHistory","type","onChange","placeholder","class","ref","concat","onKeyPress","variant","fullWidth","label","disabled"],"sources":["C:/Users/ambre/Desktop/INSA/5A/MATEO/PPIA/ppia/Front_React/src/App.js"],"sourcesContent":["import { React, useState, useRef, useEffect } from \"react\";\nimport TextField from \"@mui/material/TextField\";\nimport authConf from \"./authConf.json\";\nimport \"./App.css\";\n\nfunction App() {\n  const [studentNumber, setStudentNumber] = useState('')\n  const [password, setPassword] = useState('')\n  const [connected, setConnected] = useState(false)\n\n  const [query, setQuery] = useState([])\n  const [chatHistory, setChatHistory] = useState([[]])\n  const [currentChatHistory, setCurrentChatHistory] = useState({ conversation: [], conversationIndex: -1 });\n\n  const chatHistoryRef = useRef(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleError = (errorMessage) => {\n    setError(errorMessage);\n  };\n\n  const handleClose = () => {\n    setError(null);\n  };\n\n  function ErrorModal({ error, onClose }) {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={onClose}>&times;</span>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n  \n  const handleLogin = (e) =>{\n    e.preventDefault();\n    if (studentNumber==authConf.studentNumber && password==authConf.password){\n      setConnected(true)\n    }\n    else{\n      console.log(\"Nombre de usuario o contraseña incorrectos, por favor inténtalo de nuevo.\");\n    }\n  }\n\n\n  const inputHandler = (e) => {\n    const userInput = e.target.value;\n    setQuery(userInput);\n  };\n\n  // Enter key press launch a call to the API\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      handleSubmit();\n    }\n  };\n\n  \n  // Submission of the query to the back API\n  const handleSubmit = () => {\n    setLoading(true);\n    const jsonData = {\n      query: query,\n      history: currentChatHistory.conversation,\n    };\n  \n    fetch('api/query', {\n      method: 'POST', \n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(jsonData),\n    })\n    .then(response => response.json())\n    .then(data => {\n      setLoading(false);\n      if (data.message.answer_es === \"Ha alcanzado el límite máximo de una conversación: por favor elimine mensajes anteriores o inicie una nueva conversación.\"){\n        handleError(\"Ha ocurrido un error: \"+data.message.answer_es);\n        \n      } else {\n        setCurrentChatHistory(prevHistory => ({conversation:\n          [\n          ...(prevHistory.conversation || []),\n          { id: data.message.id, query_es: query, answer_es: data.message.answer_es}\n          ],\n          conversationIndex: prevHistory.conversationIndex })\n      );\n\n        // Update  the global chat history to avoid incoherences\n        if (currentChatHistory.conversation===undefined || currentChatHistory.conversation.length===0){\n          setChatHistory([...chatHistory, [{ id: data.message.id, query_es: query, answer_es: data.message.answer_es}]]);\n        } else {\n          const updatedHistory = chatHistory.map((conversation, index) => {\n            if (index === currentChatHistory.conversationIndex) {\n              return [...currentChatHistory.conversation, { id: data.message.id, query_es: query, answer_es: data.message.answer_es}];\n            }\n            return conversation;\n          });\n          setChatHistory(updatedHistory);\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error while sending the request to the backend: ', error);\n      handleError(\"Ha ocurrido un error: por favor verifica que su pregunta no esté vacía.\");\n      setLoading(false);\n    });\n  };\n\n  const handleChangeHistory = (index, item) =>{    \n    setCurrentChatHistory({conversationIndex: index, conversation: item})\n  };\n\n  const handleNewChat = () => {\n    const index = chatHistory.length\n    setCurrentChatHistory({conversationIndex: index, conversation: []});\n  };\n  \n  const handleDeleteMessage = (messageIndex) => {\n    setChatHistory(prevChatHistory => {\n      const updatedChatHistory = prevChatHistory.map((conversation, index) => {\n        if (index === currentChatHistory.conversationIndex) {\n          const updatedConversation = conversation.filter((_, index) => index !== messageIndex);\n          const updatedConversationWithNewIDs = updatedConversation.map((message, index) => ({\n            ...message,\n            id: index, // Assign new ID based on index\n          }));\n\n          if (updatedConversationWithNewIDs.length === 0) {\n            return null; // Filter out the empty conversation\n          }\n\n          return updatedConversationWithNewIDs;\n        }\n        return conversation;\n      }).filter(conversation => conversation !== null);\n      return updatedChatHistory;\n    });\n\n    setCurrentChatHistory(prevHistory => {\n      const updatedConversation = prevHistory.conversation.filter((message) => {\n        return message.id !== messageIndex;\n      });\n    \n      // Assign new ID based on index for the updated messages\n      const updatedConversationWithNewIDs = updatedConversation.map((message, index) => ({\n        ...message,\n        id: index,\n      }));    \n    \n      // Return the updated conversation and preserve the conversation index\n      return { conversation: updatedConversationWithNewIDs, conversationIndex: prevHistory.conversationIndex };\n    });\n  };\n\n\n  useEffect(() => {\n    if (chatHistoryRef.current) {\n      chatHistoryRef.current.scrollTop = chatHistoryRef.current.scrollHeight;\n    }\n  }, [chatHistory]);\n  \n  useEffect(() => {\n    const fetchChatHistory = async () => {\n      try {\n        const response = await fetch('History.json');\n        const data = await response.json();\n        if (data[0].length === 0) {\n          setChatHistory([]);\n          setCurrentChatHistory({conversationIndex: 0, conversation: []});\n        } else {\n          setChatHistory(data);\n          setCurrentChatHistory({ conversationIndex: data.length - 1, conversation: data[data.length - 1] });\n        }\n      } catch (error) {\n        console.error('Error fetching chat history:', error);\n      }\n    };\n\n    fetchChatHistory();\n  }, []);   \n\n  if (!connected){\n    return(<div className=\"container-form\"> <form  id=\"msform\"><fieldset><h2>Por favor, autentíquese </h2>\n      <p><input type=\"text\" value={studentNumber} onChange={(e) => setStudentNumber(e.target.value)} placeholder=\"Número estudiante\"/></p>\n      <p><input type=\"password\" value={password} onChange={(e)=>setPassword(e.target.value)} placeholder=\"Contraseña\"/></p>\n      <button className=\"saveHistory-button\" onClick={handleLogin}>Entrar</button>\n  </fieldset></form></div>);\n  }\n\n  // Front\n  return (\n    <div className=\"main\">\n      <h1>Quiz de Matematicas</h1>\n      <div class=\"border d-table w-100\">\n      </div>\n      <div className='container'>\n        <div className=\"history-panel left\">\n          <div className=\"history-scroll\"  ref={chatHistoryRef}>\n            <div className=\"history-container\">\n              <h3>Quizes</h3>\n              <button className=\"newChat-button\" onClick={handleNewChat}>Nuevo Quiz</button>\n            </div>\n            {chatHistory.length>0 && chatHistory.map((item, index) => (\n              <button\n                  className={`history-button ${index === currentChatHistory.conversationIndex ? 'selected-history-button' : ''}`}\n                  key={index}\n                  onClick={() => handleChangeHistory(index, item)}>\n                  {item && item[0] && item[0].query_es}\n              </button>\n            ))}\n          </div>\n        </div>  \n        <div className=\"history-panel right\">\n          <div className=\"history-scroll\"  ref={chatHistoryRef}>\n            <ul>\n            \n            {currentChatHistory && currentChatHistory.conversation.map((item, index) => (\n              <li className = \"messages\" key={index}>\n                <p className=\"whatsapp-bubble\"> {item.query_es}</p>\n                <p className=\"whatsapp-bubble received\">\n                  <p> {item.answer_es}</p>\n                </p>\n                <button className=\"delete-button\" onClick={() =>{handleDeleteMessage(index)}}>Suprimir</button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div className=\"search\">\n      <TextField\n        id=\"outlined-basic\"\n        onChange={inputHandler}\n        onKeyPress={handleKeyDown} \n        variant=\"outlined\" \n        fullWidth\n        label=\"Respuesta\"\n      />\n      <button className=\"search-button\" onClick={handleSubmit} disabled={loading}>\n            {loading ? <div className=\"loading-spinner\"></div> : 'Enviar'}\n      </button>\n      {error && <ErrorModal error={error} onClose={handleClose} />}\n    </div>\n  </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}