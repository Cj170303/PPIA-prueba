{"ast":null,"code":"import _objectSpread from\"C:/Users/ambre/Desktop/INSA/5A/MATEO/PPIA/ppia/Front_React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{React,useState,useRef,useEffect}from\"react\";import TextField from\"@mui/material/TextField\";import authConf from\"./authConf.json\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[studentNumber,setStudentNumber]=useState('');const[password,setPassword]=useState('');const[connected,setConnected]=useState(false);const[query,setQuery]=useState([]);const[responseStudent,setResponseStudent]=useState([]);const[correction,setCorrection]=useState([]);const[continuation,setContinuation]=useState([]);const[chatHistory,setChatHistory]=useState([[]]);const[currentChatHistory,setCurrentChatHistory]=useState({conversation:[],conversationIndex:-1});const chatHistoryRef=useRef(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleError=errorMessage=>{setError(errorMessage);};const handleClose=()=>{setError(null);};function ErrorModal(_ref){let{error,onClose}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});}const handleLogin=e=>{e.preventDefault();if(studentNumber==authConf.studentNumber&&password==authConf.password){setConnected(true);}else{console.log(\"Nombre de usuario o contraseña incorrectos, por favor inténtalo de nuevo.\");}};const inputHandler=e=>{const userInput=e.target.value;setResponseStudent(userInput);};// Enter key press launch a call to the API\nconst handleKeyDown=e=>{if(e.key===\"Enter\"){handleSubmit();}};// Submission of the query to the back API\nconst handleSubmit=()=>{setLoading(true);const jsonData={responseStudent:responseStudent,history:currentChatHistory.conversation};console.log(\"jsonData\",jsonData);fetch('api/query',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(jsonData)}).then(response=>response.json()).then(data=>{setLoading(false);/* setCurrentChatHistory(prevHistory => ({conversation:\n        [\n        ...(prevHistory.conversation || []),\n        { id: data.message.id, query_es: responseStudent, answer_es: data.message.answer_es}\n        ],\n        conversationIndex: prevHistory.conversationIndex })\n      ); */setCurrentChatHistory(prevHistory=>{const{id,answer_es}=data.message;// Extract id and answer_es from data.message\nconst query_es=responseStudent;// Define the query_es from responseStudent\n// Check if the id already exists in the conversation\nconst conversation=prevHistory.conversation.map(item=>item.id===id?_objectSpread(_objectSpread({},item),{},{query_es,answer_es})// Update the existing object\n:item);// If id is not found, add a new object\nconst idExists=prevHistory.conversation.some(item=>item.id===id);if(!idExists){console.log('not exist');conversation.push({id,query_es,answer_es});}// Return the updated chat history\nreturn _objectSpread(_objectSpread({},prevHistory),{},{conversation});});console.log(\"currentChatHistory\",currentChatHistory);// Update  the global chat history to avoid incoherences\nif(currentChatHistory.conversation===undefined||currentChatHistory.conversation.length===0){setChatHistory([...chatHistory,[{id:data.message.id,query_es:responseStudent,answer_es:data.message.answer_es}]]);}else{const updatedHistory=chatHistory.map((conversation,index)=>{if(index===currentChatHistory.conversationIndex){return[...currentChatHistory.conversation,{id:data.message.id,query_es:responseStudent,answer_es:data.message.answer_es}];}return conversation;});setChatHistory(updatedHistory);}}).catch(error=>{console.error('Error while sending the request to the backend: ',error);handleError(\"Ha ocurrido un error: por favor verifica que su pregunta no esté vacía.\");setLoading(false);});};const handleChangeHistory=(index,item)=>{setCurrentChatHistory({conversationIndex:index,conversation:item});};const handleNewChat=()=>{const index=chatHistory.length;setCurrentChatHistory({conversationIndex:index,conversation:[]});};useEffect(()=>{if(chatHistoryRef.current){chatHistoryRef.current.scrollTop=chatHistoryRef.current.scrollHeight;}},[chatHistory]);useEffect(()=>{const fetchChatHistory=async()=>{try{const response=await fetch('History.json');const data=await response.json();if(data[0].length===0){setChatHistory([]);setCurrentChatHistory({conversationIndex:0,conversation:[]});}else{setChatHistory(data);setCurrentChatHistory({conversationIndex:data.length-1,conversation:data[data.length-1]});}console.log(\"currentchathistory\",currentChatHistory);}catch(error){console.error('Error fetching chat history:',error);}};fetchChatHistory();},[]);if(!connected){return/*#__PURE__*/_jsxs(\"div\",{className:\"container-form\",children:[\" \",/*#__PURE__*/_jsx(\"form\",{id:\"msform\",children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Por favor, autent\\xEDquese \"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:studentNumber,onChange:e=>setStudentNumber(e.target.value),placeholder:\"N\\xFAmero estudiante\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Contrase\\xF1a\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"saveHistory-button\",onClick:handleLogin,children:\"Entrar\"})]})})]});}// Front\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Quiz de Matematicas\"}),/*#__PURE__*/_jsx(\"div\",{class:\"border d-table w-100\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"history-panel left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-scroll\",ref:chatHistoryRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Quizes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"newChat-button\",onClick:handleNewChat,children:\"Nuevo Quiz\"})]}),chatHistory.length>0&&chatHistory.map((item,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"history-button \".concat(index===currentChatHistory.conversationIndex?'selected-history-button':''),onClick:()=>handleChangeHistory(index,item),children:item&&item[0]&&item[0].query_es},index))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"history-panel right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"history-scroll\",ref:chatHistoryRef,children:/*#__PURE__*/_jsx(\"ul\",{children:currentChatHistory&&currentChatHistory.conversation.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"messages\",children:[item.query_es&&/*#__PURE__*/_jsx(\"p\",{className:\"whatsapp-bubble\",children:item.query_es}),item.answer_es&&/*#__PURE__*/_jsx(\"p\",{className:\"whatsapp-bubble received\",children:item.answer_es})]},index))})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",onChange:inputHandler,onKeyPress:handleKeyDown,variant:\"outlined\",fullWidth:true,label:\"Respuesta\"}),/*#__PURE__*/_jsx(\"button\",{className:\"search-button\",onClick:handleSubmit,disabled:loading,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}):'Enviar'}),error&&/*#__PURE__*/_jsx(ErrorModal,{error:error,onClose:handleClose})]})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","TextField","authConf","jsx","_jsx","jsxs","_jsxs","App","studentNumber","setStudentNumber","password","setPassword","connected","setConnected","query","setQuery","responseStudent","setResponseStudent","correction","setCorrection","continuation","setContinuation","chatHistory","setChatHistory","currentChatHistory","setCurrentChatHistory","conversation","conversationIndex","chatHistoryRef","loading","setLoading","error","setError","handleError","errorMessage","handleClose","ErrorModal","_ref","onClose","className","children","onClick","handleLogin","e","preventDefault","console","log","inputHandler","userInput","target","value","handleKeyDown","key","handleSubmit","jsonData","history","fetch","method","headers","body","JSON","stringify","then","response","json","data","prevHistory","id","answer_es","message","query_es","map","item","_objectSpread","idExists","some","push","undefined","length","updatedHistory","index","catch","handleChangeHistory","handleNewChat","current","scrollTop","scrollHeight","fetchChatHistory","type","onChange","placeholder","class","ref","concat","onKeyPress","variant","fullWidth","label","disabled"],"sources":["C:/Users/ambre/Desktop/INSA/5A/MATEO/PPIA/ppia/Front_React/src/App.js"],"sourcesContent":["import { React, useState, useRef, useEffect } from \"react\";\nimport TextField from \"@mui/material/TextField\";\nimport authConf from \"./authConf.json\";\nimport \"./App.css\";\n\nfunction App() {\n  const [studentNumber, setStudentNumber] = useState('')\n  const [password, setPassword] = useState('')\n  const [connected, setConnected] = useState(false)\n\n  const [query, setQuery] = useState([])\n  const [responseStudent, setResponseStudent] = useState([])\n  const [correction, setCorrection] = useState([])\n  const [continuation, setContinuation] = useState([])\n  const [chatHistory, setChatHistory] = useState([[]])\n  const [currentChatHistory, setCurrentChatHistory] = useState({ conversation: [], conversationIndex: -1 });\n\n  const chatHistoryRef = useRef(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleError = (errorMessage) => {\n    setError(errorMessage);\n  };\n\n  const handleClose = () => {\n    setError(null);\n  };\n\n  function ErrorModal({ error, onClose }) {\n    return (\n      <div className=\"modal\">\n        <div className=\"modal-content\">\n          <span className=\"close\" onClick={onClose}>&times;</span>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n  \n  const handleLogin = (e) =>{\n    e.preventDefault();\n    if (studentNumber==authConf.studentNumber && password==authConf.password){\n      setConnected(true)\n    }\n    else{\n      console.log(\"Nombre de usuario o contraseña incorrectos, por favor inténtalo de nuevo.\");\n    }\n  }\n\n\n  const inputHandler = (e) => {\n    const userInput = e.target.value;\n    setResponseStudent(userInput);\n  };\n\n  // Enter key press launch a call to the API\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      handleSubmit();\n    }\n  };\n\n  \n  // Submission of the query to the back API\n  const handleSubmit = () => {\n    setLoading(true);\n    const jsonData = {\n      responseStudent: responseStudent,\n      history: currentChatHistory.conversation,\n    };\n    console.log(\"jsonData\", jsonData);\n  \n    fetch('api/query', {\n      method: 'POST', \n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(jsonData),\n    })\n    .then(response => response.json())\n    .then(data => {\n      setLoading(false);\n      \n      /* setCurrentChatHistory(prevHistory => ({conversation:\n        [\n        ...(prevHistory.conversation || []),\n        { id: data.message.id, query_es: responseStudent, answer_es: data.message.answer_es}\n        ],\n        conversationIndex: prevHistory.conversationIndex })\n      ); */\n      setCurrentChatHistory(prevHistory => {\n        const { id, answer_es } = data.message; // Extract id and answer_es from data.message\n        const query_es = responseStudent; // Define the query_es from responseStudent\n      \n        // Check if the id already exists in the conversation\n        const conversation = prevHistory.conversation.map(item => \n          item.id === id \n            ? { ...item, query_es, answer_es } // Update the existing object\n            : item\n        );\n        \n        // If id is not found, add a new object\n        const idExists = prevHistory.conversation.some(item => item.id === id);\n        if (!idExists) {\n          console.log('not exist');\n          conversation.push({ id, query_es, answer_es });\n        }\n      \n        // Return the updated chat history\n        return {\n          ...prevHistory,\n          conversation,\n        };\n      });\n\n      console.log(\"currentChatHistory\", currentChatHistory);\n      \n\n      // Update  the global chat history to avoid incoherences\n      if (currentChatHistory.conversation===undefined || currentChatHistory.conversation.length===0){\n        setChatHistory([...chatHistory, [{ id: data.message.id, query_es: responseStudent, answer_es: data.message.answer_es}]]);\n      } else {\n        const updatedHistory = chatHistory.map((conversation, index) => {\n          if (index === currentChatHistory.conversationIndex) {\n            return [...currentChatHistory.conversation, { id: data.message.id, query_es: responseStudent, answer_es: data.message.answer_es}];\n          }\n          return conversation;\n        });\n        setChatHistory(updatedHistory);\n      }\n    })\n    .catch(error => {\n      console.error('Error while sending the request to the backend: ', error);\n      handleError(\"Ha ocurrido un error: por favor verifica que su pregunta no esté vacía.\");\n      setLoading(false);\n    });\n  };\n\n  const handleChangeHistory = (index, item) =>{    \n    setCurrentChatHistory({conversationIndex: index, conversation: item})\n  };\n\n  const handleNewChat = () => {\n    const index = chatHistory.length\n    setCurrentChatHistory({conversationIndex: index, conversation: []});\n  };\n  \n\n  useEffect(() => {\n    if (chatHistoryRef.current) {\n      chatHistoryRef.current.scrollTop = chatHistoryRef.current.scrollHeight;\n    }\n  }, [chatHistory]);\n  \n  useEffect(() => {\n    const fetchChatHistory = async () => {\n      try {\n        const response = await fetch('History.json');\n        const data = await response.json();\n        if (data[0].length === 0) {\n          setChatHistory([]);\n          setCurrentChatHistory({conversationIndex: 0, conversation: []});\n        } else {\n          setChatHistory(data);\n          setCurrentChatHistory({ conversationIndex: data.length - 1, conversation: data[data.length - 1] });\n        }\n        console.log(\"currentchathistory\", currentChatHistory);\n      } catch (error) {\n        console.error('Error fetching chat history:', error);\n      }\n    };\n\n    fetchChatHistory();\n  }, []);   \n\n  if (!connected){\n    return(<div className=\"container-form\"> <form  id=\"msform\"><fieldset><h2>Por favor, autentíquese </h2>\n      <p><input type=\"text\" value={studentNumber} onChange={(e) => setStudentNumber(e.target.value)} placeholder=\"Número estudiante\"/></p>\n      <p><input type=\"password\" value={password} onChange={(e)=>setPassword(e.target.value)} placeholder=\"Contraseña\"/></p>\n      <button className=\"saveHistory-button\" onClick={handleLogin}>Entrar</button>\n  </fieldset></form></div>);\n  }\n\n  // Front\n  return (\n    <div className=\"main\">\n      <h1>Quiz de Matematicas</h1>\n      <div class=\"border d-table w-100\">\n      </div>\n      <div className='container'>\n        <div className=\"history-panel left\">\n          <div className=\"history-scroll\"  ref={chatHistoryRef}>\n            <div className=\"history-container\">\n              <h3>Quizes</h3>\n              <button className=\"newChat-button\" onClick={handleNewChat}>Nuevo Quiz</button>\n            </div>\n            {chatHistory.length>0 && chatHistory.map((item, index) => (\n              <button\n                  className={`history-button ${index === currentChatHistory.conversationIndex ? 'selected-history-button' : ''}`}\n                  key={index}\n                  onClick={() => handleChangeHistory(index, item)}>\n                  {item && item[0] && item[0].query_es}\n              </button>\n            ))}\n          </div>\n        </div>  \n        <div className=\"history-panel right\">\n          <div className=\"history-scroll\"  ref={chatHistoryRef}>\n            <ul>\n            \n            {currentChatHistory && currentChatHistory.conversation.map((item, index) => (\n              <li className=\"messages\" key={index}>\n                {item.query_es && (\n                  <p className=\"whatsapp-bubble\">{item.query_es}</p>\n                )}\n                {item.answer_es && (\n                  <p className=\"whatsapp-bubble received\">{item.answer_es}</p>\n                )}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div className=\"search\">\n      <TextField\n        id=\"outlined-basic\"\n        onChange={inputHandler}\n        onKeyPress={handleKeyDown} \n        variant=\"outlined\" \n        fullWidth\n        label=\"Respuesta\"\n      />\n      <button className=\"search-button\" onClick={handleSubmit} disabled={loading}>\n            {loading ? <div className=\"loading-spinner\"></div> : 'Enviar'}\n      </button>\n      {error && <ErrorModal error={error} onClose={handleClose} />}\n    </div>\n  </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}